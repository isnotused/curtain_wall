<!doctype html>
<!--主控制台页面-->
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>幕墙单元件快速生成验证系统 · 控制台</title>
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/custom.css">
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top dashboard-nav shadow-sm">
      <div class="container-fluid">
        <a class="navbar-brand d-flex align-items-center gap-2" href="#">
          <span class="badge bg-primary-subtle text-primary-emphasis rounded-pill px-3 py-2">v1.0</span>
          <span>Facade Parametric Orchestrator</span>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navContent" aria-controls="navContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navContent">
          <div class="ms-lg-4 d-flex align-items-center gap-3 flex-wrap">
            <div class="metric-pill bg-success-soft">
              <span class="small text-muted">活动设计单元</span>
              <strong id="activeProfileLabel">--</strong>
            </div>
            <div class="metric-pill">
              <span class="small text-muted">数据刷新</span>
              <strong id="lastUpdated">--</strong>
            </div>
            <div class="d-flex align-items-center gap-2">
              <label for="profileSelector" class="text-white-50 small mb-0">切换方案:</label>
              <select id="profileSelector" class="form-select form-select-sm bg-dark text-white border-0 shadow-sm"></select>
            </div>
          </div>
          <div class="ms-auto d-flex align-items-center gap-3">
            <span class="badge bg-light text-dark" id="sessionUser"></span>
            <button id="logoutBtn" class="btn btn-outline-light btn-sm">安全退出</button>
          </div>
        </div>
      </div>
    </nav>

    <main class="dashboard-container container-fluid">
      <div class="row g-4 align-items-stretch">
        <div class="col-xl-4">
          <section class="card card-section h-100 position-relative">
            <div class="card-body">
              <div class="section-label">参数输入处理模块</div>
              <h2 class="card-title mb-3">基础参数与约束配置</h2>
              <p class="text-muted small">系统依据输入参数执行完整性校核并匹配设计规则，为单元件生成提供规范化数据基础。</p>
              <form id="parameterForm" class="row g-3">
                <div class="col-6">
                  <label class="form-label">单元宽度 (m)</label>
                  <input type="number" step="0.01" class="form-control" name="module_width" required>
                </div>
                <div class="col-6">
                  <label class="form-label">单元高度 (m)</label>
                  <input type="number" step="0.01" class="form-control" name="module_height" required>
                </div>
                <div class="col-6">
                  <label class="form-label">单元进深 (m)</label>
                  <input type="number" step="0.01" class="form-control" name="module_depth" required>
                </div>
                <div class="col-6">
                  <label class="form-label">曲率半径 (m)</label>
                  <input type="number" step="0.1" class="form-control" name="curvature_radius" required>
                </div>
                <div class="col-6">
                  <label class="form-label">倾角 (°)</label>
                  <input type="number" step="0.1" class="form-control" name="tilt_angle" required>
                </div>
                <div class="col-6">
                  <label class="form-label">竖梃间距 (m)</label>
                  <input type="number" step="0.01" class="form-control" name="mullion_spacing" required>
                </div>
                <div class="col-6">
                  <label class="form-label">面板厚度 (m)</label>
                  <input type="number" step="0.001" class="form-control" name="panel_thickness" required>
                </div>
                <div class="col-6">
                  <label class="form-label">设计风速 (m/s)</label>
                  <input type="number" step="0.1" class="form-control" name="wind_speed" required>
                </div>
                <div class="col-6">
                  <label class="form-label">热梯度 (°C)</label>
                  <input type="number" step="0.1" class="form-control" name="thermal_gradient" required>
                </div>
                <div class="col-6">
                  <label class="form-label">主要材料</label>
                  <select class="form-select" name="material" required>
                    <option value="aluminum">铝合金框架</option>
                    <option value="glass">夹层玻璃</option>
                    <option value="steel">不锈钢</option>
                  </select>
                </div>
                <div class="col-12">
                  <button class="btn btn-primary w-100" type="submit">执行参数清洗与映射</button>
                </div>
              </form>
            </div>
          </section>
        </div>
        <div class="col-xl-8">
          <section class="card card-section h-100 position-relative">
            <div class="card-body">
              <div class="section-label">参数校核结果</div>
              <h2 class="card-title mb-4">完整性匹配评估</h2>
              <div class="row g-4">
                <div class="col-lg-5">
                  <div class="mb-4">
                    <span class="text-muted small">参数完整性</span>
                    <div class="d-flex align-items-center gap-3 mt-1">
                      <h3 id="completenessScore" class="mb-0 display-6 fw-semibold">--%</h3>
                      <progress class="parameter-progress" id="completenessProgress" max="100" value="0"></progress>
                    </div>
                  </div>
                  <div class="mb-4">
                    <span class="text-muted small">规则匹配度</span>
                    <div class="d-flex align-items-center gap-3 mt-1">
                      <h3 id="ruleMatchScore" class="mb-0 display-6 fw-semibold text-primary">--%</h3>
                      <progress class="parameter-progress" id="ruleMatchProgress" max="100" value="0"></progress>
                    </div>
                  </div>
                  <div class="alert alert-info bg-opacity-75" id="integrityNotes">等待输入参数...</div>
                </div>
                <div class="col-lg-7">
                  <div class="chart-container">
                    <canvas id="integrityRadar"></canvas>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>
      </div>

      <div class="row g-4 align-items-stretch mt-1">
        <div class="col-xl-4">
          <section class="card card-section h-100 position-relative">
            <div class="card-body">
              <div class="section-label">单元件生成模块</div>
              <h2 class="card-title mb-3">几何构成与生成策略</h2>
              <div class="d-flex flex-wrap gap-3 mb-3">
                <div class="metric-pill">
                  投影面积: <strong id="projectedArea">--</strong> m²
                </div>
                <div class="metric-pill">
                  包络体积: <strong id="envelopeVolume">--</strong> m³
                </div>
                <div class="metric-pill bg-success-soft">
                  框架重量: <strong id="frameWeight">--</strong> kN
                </div>
              </div>
              <div class="chart-container mb-3">
                <canvas id="pathWeightChart"></canvas>
              </div>
              <div class="row g-2" id="dynamicCoefficientGroup"></div>
            </div>
          </section>
        </div>
        <div class="col-xl-4">
          <section class="card card-section h-100 position-relative">
            <div class="card-body">
              <div class="section-label">结构验证模块</div>
              <h2 class="card-title mb-3">受力分布与稳定性</h2>
              <div class="d-flex gap-3 mb-3">
                <span class="metric-pill">风压: <strong id="windPressure">--</strong> kPa</span>
                <span class="metric-pill">恒载: <strong id="deadLoad">--</strong> kN</span>
                <span class="metric-pill bg-success-soft">稳定性指数: <strong id="stabilityIndex">--</strong></span>
              </div>
              <div class="chart-container mb-3">
                <canvas id="stressChart"></canvas>
              </div>
              <div class="table-responsive">
                <table class="table table-sm mb-0 align-middle" id="stressTable">
                  <thead>
                    <tr>
                      <th>节点</th>
                      <th>标高 (m)</th>
                      <th>生成应力</th>
                      <th>优化应力</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>
          </section>
        </div>
        <div class="col-xl-4">
          <section class="card card-section h-100 position-relative">
            <div class="card-body">
              <div class="section-label">误差修正模块</div>
              <h2 class="card-title mb-3">偏差收敛与适配性</h2>
              <div class="d-flex gap-3 mb-3">
                <span class="metric-pill">残余偏差: <strong id="residualDeviation">--</strong> mm</span>
                <span class="metric-pill bg-success-soft">装配适配性: <strong id="assemblySuitability">--%</strong></span>
              </div>
              <div class="chart-container mb-3">
                <canvas id="deviationChart"></canvas>
              </div>
              <div class="table-responsive">
                <table class="table table-sm mb-0" id="iterationTable">
                  <thead>
                    <tr>
                      <th>迭代</th>
                      <th>尺寸偏差 (mm)</th>
                      <th>形态偏移 (°)</th>
                      <th>路径权重</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>
          </section>
        </div>
      </div>

      <div class="row g-4 align-items-stretch mt-1">
        <div class="col-xl-6">
          <section class="card card-section h-100 position-relative">
            <div class="card-body">
              <div class="section-label">数据关联模块</div>
              <h2 class="card-title mb-3">设计-施工关联追踪</h2>
              <div class="chart-container mb-3">
                <canvas id="correlationChart"></canvas>
              </div>
              <div class="table-responsive">
                <table class="table table-sm align-middle" id="linkageTable">
                  <thead>
                    <tr>
                      <th>阶段</th>
                      <th>设计参数 (m)</th>
                      <th>现场值 (m)</th>
                      <th>同步滞后 (d)</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>
          </section>
        </div>
        <div class="col-xl-6">
          <section class="card card-section h-100 position-relative">
            <div class="card-body">
              <div class="section-label">操作日志</div>
              <h2 class="card-title mb-3">生成验证记录</h2>
              <div class="alert alert-secondary" id="historyHint">提交新的参数配置后可查看生成的全流程记录。</div>
              <div class="table-responsive">
                <table class="table table-sm align-middle" id="historyTable">
                  <thead>
                    <tr>
                      <th>时间</th>
                      <th>方案</th>
                      <th>稳定性指数</th>
                      <th>适配性</th>
                      <th>备注</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>
          </section>
        </div>
      </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.6/dist/chart.umd.min.js"></script>
    <script type="module" src="assets/js/app.js"></script>
  </body>
</html>
